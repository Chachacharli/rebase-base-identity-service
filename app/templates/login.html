{% extends "base.html" %}

{% block title %}Login - Rebase{% endblock %}

{% block content %}
  <h1 class="page-title" style="margin-bottom: 0.75rem;">Log in</h1>

  {% if error %}
    <div class="message-error" role="alert">{{ error }}</div>
  {% endif %}

  <form class="form-content" action="/authorize" method="post" novalidate>
    <div class="form-row">
      <label for="username">Username o Email</label>
      <input id="username" name="username" type="text" class="input" required value="{{ username|default('') }}">
    </div>

    <div class="form-row">
      <label for="password">Password</label>
      <input id="password" name="password" type="password" class="input" required>
    </div>

    <div class="form-row" style="display:flex;align-items:center;gap:.5rem;">
      <input id="remember" name="remember" type="checkbox" />
      <label for="remember" class="muted">Keep me logged in</label>
      <div style="margin-left:auto">
        <a href="/forgot-password" class="text-link">Forgot password?</a>
      </div>
    </div>

    <!-- Campos ocultos necesarios para OAuth2 (si aplica) -->
    <input type="hidden" name="client_id" value="{{ client_id|default('') }}" />
    <input type="hidden" name="redirect_uri" value="{{ redirect_uri|default('') }}" />
    <input type="hidden" name="state" value="{{ state|default('') }}" />
    <input type="hidden" name="scope" value="{{ scope|default('') }}" />
    <input type="hidden" name="code_challenge" value="{{ code_challenge|default('') }}" />
    <input type="hidden" name="code_challenge_method" value="{{ code_challenge_method|default('S256') }}" />

    <div class="form-row">
      <button type="submit" class="button">Log in</button>
    </div>
  </form>
{% endblock %}
